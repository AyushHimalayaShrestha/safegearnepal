{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Himalaya Road Safety{% endblock %}</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Your custom CSS -->
  <link rel="stylesheet" href="{% static 'products/css/style.css' %}">
</head>

<body class="bg-slate-900 text-slate-100 min-h-screen">

  <!-- NAVBAR -->
  <header class="bg-slate-800 shadow">
    <div class="max-w-6xl mx-auto p-4 flex justify-between items-center">
      
      <!-- LOGO -->
      <a href="{% url 'products:home' %}" class="text-yellow-300 font-bold text-xl">
        Himalaya Road Safety
      </a>

      <!-- DESKTOP MENU -->
      <nav class="hidden md:flex space-x-6 text-slate-200 items-center">
        <!-- FIX 3: USE DJANGO URL TAGS -->
        <a href="{% url 'products:home' %}" class="hover:text-white">Home</a>
        <a href="{% url 'products:product_list' %}" class="hover:text-white">Products</a>
        <a href="{% url 'products:about' %}" class="hover:text-white">About</a>
        <a href="{% url 'contact:contact_page' %}" class="hover:text-white">Contact</a>

        <!-- AUTH SECTION -->
        {% if user.is_authenticated %}
          <div class="relative group">
            <button class="text-yellow-300 font-semibold">
              {{ user.username }}
            </button>
            <div class="absolute hidden group-hover:block bg-slate-700 mt-2 p-2 rounded shadow-lg right-0">
              <!-- FIX 4: USE ACCOUNTS:LOGOUT URL -->
              <a href="{% url 'accounts:logout' %}" class="block px-3 py-1 hover:bg-slate-600 rounded">
                Logout
              </a>
            </div>
          </div>
        {% else %}
          <!-- FIX 5: USE ACCOUNTS URLS -->
          <a href="{% url 'accounts:login' %}" class="px-3 py-1 bg-yellow-500 text-black rounded hover:bg-yellow-400">
            Login
          </a>
          <a href="{% url 'accounts:register' %}" class="px-3 py-1 border border-yellow-500 text-yellow-400 rounded hover:bg-yellow-600 hover:text-black">
            Register
          </a>
        {% endif %}
      </nav>

      <!-- MOBILE BUTTON -->
      <button id="menu-btn" class="md:hidden text-slate-200 text-2xl">
        ☰
      </button>
    </div>

    <!-- MOBILE MENU -->
    <div id="mobile-menu" class="hidden md:hidden bg-slate-800 p-4 space-y-3">
      <!-- FIX 6: MOBILE MENU URLS -->
      <a href="{% url 'products:home' %}" class="block">Home</a>
      <a href="{% url 'products:product_list' %}" class="block">Products</a>
      <a href="{% url 'products:about' %}" class="block">About</a>
      <a href="{% url 'contact:contact_page' %}" class="block">Contact</a>

      {% if user.is_authenticated %}
        <p class="text-yellow-300 font-semibold">{{ user.username }}</p>
        <a href="{% url 'accounts:logout' %}" class="block text-red-400">Logout</a>
      {% else %}
        <a href="{% url 'accounts:login' %}" class="block text-yellow-300">Login</a>
        <a href="{% url 'accounts:register' %}" class="block text-yellow-300">Register</a>
      {% endif %}
    </div>
  </header>

  <!-- CONTENT -->
  <main class="max-w-6xl mx-auto p-6">
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="text-center p-4 text-slate-400">
    © 2025 Himalaya Road Safety Pvt. Ltd
  </footer>

  <script>
    // Mobile Menu Toggle
    document.getElementById('menu-btn').onclick = () => {
      document.getElementById('mobile-menu').classList.toggle('hidden');
    };
  </script>

</body>
</html>